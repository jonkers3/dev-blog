<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 4.18.2"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><title data-react-helmet="true"></title><style data-styled="" data-styled-version="5.3.5">body{margin:0px;font-family:'Open Sans',sans-serif;line-height:1.6;text-rendering:optimizeLegibility;font-size:1.1rem;}/*!sc*/
data-styled.g1[id="sc-global-hcrNaP1"]{content:"sc-global-hcrNaP1,"}/*!sc*/
.euUrnZ{max-width:920px;margin:0 auto;padding:0 0px;box-sizing:border-box;}/*!sc*/
data-styled.g2[id="Layout__PageContainer-sc-1dz3zx4-0"]{content:"euUrnZ,"}/*!sc*/
.jRpxbe{padding:12px;}/*!sc*/
data-styled.g3[id="Layout__InnerContainer-sc-1dz3zx4-1"]{content:"jRpxbe,"}/*!sc*/
</style></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="Layout__PageContainer-sc-1dz3zx4-0 euUrnZ"><div class="Layout__Header-sc-1dz3zx4-2 jNeeIo"><a href="/dev-blog/">Home</a></div><div class="Layout__InnerContainer-sc-1dz3zx4-1 jRpxbe"><p>July 22, 2022</p><h1>Setting Up a Dev Blog with Gatsby II</h1><p>Today we will deploying the new Gatsby-based dev blog that we just finished setting up.</p><br/><h2>1. We Want Automated Builds and Easy Deployment</h2><hr/><p>For the time being, I&#x27;m just going to deploy to Github Pages. I will hook up a custom domain later. My main concern at the moment is just being able to add content and deploy changes to the site as effortlessly as possible. So now we go to Github.</p><br/><h2>2. Setup a repository on Github</h2><hr/><p>Create a new, empty repository on Github. We made ours <!-- --><a href="https://github.com/jonkers3/dev-blog">here</a>.<!-- --></p><p>The Gatsby CLI initialized a git repository for us at the very beginning of our endeavors. We need to make our initial commit, but first we should setup SSH access to Github. This will make it a breeze to push code to our Github remote.</p><h3>Create an SSH key (use your own email)</h3><pre class="prism-code language-sh" style="color:#393A34;background-color:#f6f8fa;padding:20px;position:relative"><button style="position:absolute;top:0;right:0;margin:8px;padding:8px 12px 8px 12px;border-radius:8px;border-width:0;background:deepskyblue">Copy</button><div class="token-line" style="color:#393A34"><span class="token plain">ssh-keygen -t ed25519 -C &#x27;me@my-email.com&#x27;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">eval &quot;$(ssh-agent -s)&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">ssh-add ~/.ssh/id_ed25519</span></div></pre><p>Copy the output of the following command to the clipboard:</p><pre class="prism-code language-sh" style="color:#393A34;background-color:#f6f8fa;padding:20px;position:relative"><button style="position:absolute;top:0;right:0;margin:8px;padding:8px 12px 8px 12px;border-radius:8px;border-width:0;background:deepskyblue">Copy</button><div class="token-line" style="color:#393A34"><span class="token plain">cat ~/.ssh/id_ed25519.pub</span></div></pre><p>Now go <!-- --><a href="https://github.com/settings/ssh/new">here</a>, paste the public key, give it a name, and save it. Now verify that your SSH setup works by running:<!-- --></p><pre class="prism-code language-sh" style="color:#393A34;background-color:#f6f8fa;padding:20px;position:relative"><button style="position:absolute;top:0;right:0;margin:8px;padding:8px 12px 8px 12px;border-radius:8px;border-width:0;background:deepskyblue">Copy</button><div class="token-line" style="color:#393A34"><span class="token plain">ssh -T git@github.com</span></div></pre><p>Once that works we can add a git remote and push our initial code to Github.</p><pre class="prism-code language-sh" style="color:#393A34;background-color:#f6f8fa;padding:20px;position:relative"><button style="position:absolute;top:0;right:0;margin:8px;padding:8px 12px 8px 12px;border-radius:8px;border-width:0;background:deepskyblue">Copy</button><div class="token-line" style="color:#393A34"><span class="token plain">git remote add origin git@github.com:jonkers3/dev-blog.git</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">git push --set-upstream origin master</span></div></pre><p>Now we can just commit changes and call <!-- --><code>git push</code> to have them pushed right to the master branch on Github.<!-- --></p><p>At this point we should have our code live on Github in the <!-- --><em>master</em> branch. Now let&#x27;s see if we can get it deployed as an actual website on Github Pages.<!-- --></p><br/><h2>3. Setup Github Pages</h2><hr/><p><a href="https://github.com/marketplace/actions/github-pages-action">This template</a> appears to be just the sort of things we are looking for. The Gatsby example provided appears to get us most of the way to where we are going. Create the following file:<!-- --></p><h4><code>.github/workflows/gh-pages.js</code></h4><pre class="prism-code language-yml" style="color:#393A34;background-color:#f6f8fa;padding:20px;position:relative"><button style="position:absolute;top:0;right:0;margin:8px;padding:8px 12px 8px 12px;border-radius:8px;border-width:0;background:deepskyblue">Copy</button><div class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> GitHub Pages</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> master</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">pull_request</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">deploy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">20.04</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">permissions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">contents</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> write</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">concurrency</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">group</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> github.workflow </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> github.ref </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/checkout@v3</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Setup Node</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/setup</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">node@v3</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">node-version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;18&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Cache dependencies</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/cache@v2</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ~/.npm</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> runner.os </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">node</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> hashFiles(&#x27;</span><span class="token important">**/package-lock.json&#x27;)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">restore-keys</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span></div><div class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            ${{ runner.os }}-node-</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> npm ci</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> npm run build</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deploy</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> peaceiris/actions</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">gh</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pages@v3</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">if</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> github.ref == &#x27;refs/heads/master&#x27; </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">github_token</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.GITHUB_TOKEN </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">publish_dir</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ./public</span></div></pre><p>Commit this file and push it to the master branch. Now, goto the Settings page for the Github repository, and make sure Branch is set to <!-- --><code>gh-pages</code> and the selected folder is <!-- --><code>root</code>, as shown in the following picture.<!-- --></p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:900px">
      <!-- --><a class="gatsby-resp-image-link" href="/dev-blog/static/0af42f574786412bdaa27fcd1f5af9df/bb3b7/github-pages-settings.png" style="display:block" target="_blank" rel="noopener">
    <!-- --><span class="gatsby-resp-image-background-image" style="padding-bottom:38.666666666666664%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABPUlEQVQY0z2RWW7DMAxEfYBY1mItJLXLlhMnTgr0/ncr3LQB5mMI8gEccrCYmbAfoS8xdx9XJuxlMiM3l0lfuLm8zb/ewwNQ5RI+sPUbxD3k7ig7TA4z+OIwO8zom6MCvmJoYoaR26GuO8VFqJOfpJtTjPdrPfb165GOIz6e+fmKxzPcd+wF1oI9Yy+2RRVooLCEsmkXR24m6RTRHEgSKu8FkqTwp7N0EkES/nZJAg4+rVITk+69dl3upe2pXMG3XK8xdgoLULWQtKtCF8btyO04WcbtsGzHyM0nM6V1u3/fHt8+9/X2ldsOoRnI0xkKmIRzmGsmTuSELeYPn+q1314YmnZRu6BdMpgtnneyp8kWsnKN68iEGfrtCb4aTIaSMn6SjiuQmsSMEBefNzCkNPEZhQKukCucFLLfB/0ArCwwKqehz2AAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <!-- --><img class="gatsby-resp-image-image" alt="github pages settings" title="github pages settings" src="/dev-blog/static/0af42f574786412bdaa27fcd1f5af9df/1cfc2/github-pages-settings.png" srcSet="/dev-blog/static/0af42f574786412bdaa27fcd1f5af9df/3684f/github-pages-settings.png 225w,/dev-blog/static/0af42f574786412bdaa27fcd1f5af9df/fc2a6/github-pages-settings.png 450w,/dev-blog/static/0af42f574786412bdaa27fcd1f5af9df/1cfc2/github-pages-settings.png 900w,/dev-blog/static/0af42f574786412bdaa27fcd1f5af9df/bb3b7/github-pages-settings.png 1211w" sizes="(max-width: 900px) 100vw, 900px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  <!-- --></a>
    <!-- --></span></p><p>Now, every time we push changes to our master branch on Github, this action will be triggered to run our build process and deploy the new version of our website.</p><br/><h2>4. Tweak path settings</h2><hr/><p>Due to the nature of our Github Pages setup, we need to make the following change, which should be fairly self-explanatory:</p><h4><em><code>gatsby-config.ts</code></em></h4><pre class="prism-code language-javascript" style="color:#393A34;background-color:#f6f8fa;padding:20px;position:relative"><button style="position:absolute;top:0;right:0;margin:8px;padding:8px 12px 8px 12px;border-radius:8px;border-width:0;background:deepskyblue">Copy</button><div class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">+</span><span class="token plain"> pathPrefix</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;dev-blog&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// https://jonkers3.github.io/dev-blog &lt;---</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">siteMetadata</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token spread operator" style="color:#393A34">...</span></div></pre><p>Given that at the moment all we really have is a blog, the extra <!-- --><code>blog</code> in our URL is a big redundant, especially coming after the dev-blog that we&#x27;re already in!<!-- --></p><p>Let&#x27;s clean that up. It turns out that the easiest way to fix this right now is just to move the blog index and template files out of <!-- --><code>src/pages/blog</code> folder and into <!-- --><code>src/pages</code>.<!-- --></p><h4><em><code>src/pages/index.js</code></em></h4><pre class="prism-code language-sh" style="color:#393A34;background-color:#f6f8fa;padding:20px;position:relative"><button style="position:absolute;top:0;right:0;margin:8px;padding:8px 12px 8px 12px;border-radius:8px;border-width:0;background:deepskyblue">Copy</button><div class="token-line" style="color:#393A34"><span class="token plain">mv src/pages/blog/index.js src/pages/index.js</span></div><div class="token-line" style="color:#393A34"><span class="token plain">mv src/pages/blog/{mdx.slug}.js src/pages/{mdx.slug}.js</span></div></pre><p>Fix the imports in these two files to reflect the change:</p><h4><em><code>src/pages/{mdx.slug}.js</code></em></h4><pre class="prism-code language-jsx" style="color:#393A34;background-color:#f6f8fa;padding:20px;position:relative"><button style="position:absolute;top:0;right:0;margin:8px;padding:8px 12px 8px 12px;border-radius:8px;border-width:0;background:deepskyblue">Copy</button><div class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Code</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;../../components/Code&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Layout</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;../../components/Layout&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Code</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;../components/Code&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Layout</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;../components/Layout&#x27;</span></div></pre><h4><em><code>src/pages/index.js</code></em></h4><pre class="prism-code language-jsx" style="color:#393A34;background-color:#f6f8fa;padding:20px;position:relative"><button style="position:absolute;top:0;right:0;margin:8px;padding:8px 12px 8px 12px;border-radius:8px;border-width:0;background:deepskyblue">Copy</button><div class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Layout</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;../../components/Layout&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Layout</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;../components/Layout&#x27;</span></div></pre><br/><h2>5. Create a gatsby-node.js config file</h2><hr/><p>The last thing we need to do is create some helpers for generating our static files. This is used during the <!-- --><code>gatsby build</code> task. Create the following file:<!-- --></p><h4><em><code>gatsby-node.js</code></em></h4><pre class="prism-code language-javascript" style="color:#393A34;background-color:#f6f8fa;padding:20px;position:relative"><button style="position:absolute;top:0;right:0;margin:8px;padding:8px 12px 8px 12px;border-radius:8px;border-width:0;background:deepskyblue">Copy</button><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> path </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">path</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">exports</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method-variable function-variable method function property-access" style="color:#d73a49">createPages</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter"> graphql</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> actions </span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> createPage </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> actions</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">graphql</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c"></span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">      allMdx(sort: { order: DESC, fields: [frontmatter___date] }, limit: 1000) {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        nodes {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">          frontmatter {</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">            date(formatString: &quot;DD MMMM YYYY&quot;)</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">            title</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">          }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">          slug</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">        }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">      }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">    }</span></div><div class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">  </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> posts </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">allMdx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">nodes</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    posts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">forEach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">node</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">createPage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">path</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> node</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">slug</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">component</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">./src/pages/blog/{mdx.slug}.js</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">context</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">slug</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> node</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">slug</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">prev</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> index </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token keyword nil" style="color:#00009f">undefined</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> posts</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">index </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">next</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> index </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> posts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token keyword nil" style="color:#00009f">undefined</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> posts</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">index </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></pre><br/><h2>6. Commit changes and push to Github</h2><hr/><pre class="prism-code language-sh" style="color:#393A34;background-color:#f6f8fa;padding:20px;position:relative"><button style="position:absolute;top:0;right:0;margin:8px;padding:8px 12px 8px 12px;border-radius:8px;border-width:0;background:deepskyblue">Copy</button><div class="token-line" style="color:#393A34"><span class="token plain">git commit -a -u -m &#x27;initial deploy&#x27; &amp;&amp; git push</span></div></pre><p>After that, we are now live on Github Pages with our brand new Gatsby dev blog: <!-- --><a href="https://jonkers3.github.io/dev-blog">https://jonkers3.github.io/dev-blog</a>.<!-- --></p></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2022/07/22/setting-up-with-gatsby-ii/";window.___webpackCompilationHash="bd7316074701b8fc9161";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-a6c66dc93bccb3da826c.js"],"app":["/app-cf97ab0c8059b9819aec.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-fe98c353b57ca9cad359.js"],"component---src-pages-index-js":["/component---src-pages-index-js-d097ea124cd27d328a5c.js"],"component---src-pages-mdx-slug-js":["/component---src-pages-mdx-slug-js-5fc584a4aa75d5093726.js"]};/*]]>*/</script><script src="/dev-blog/polyfill-a6c66dc93bccb3da826c.js" nomodule=""></script><script src="/dev-blog/app-cf97ab0c8059b9819aec.js" async=""></script><script src="/dev-blog/framework-4e4c792aa2f9980c1c06.js" async=""></script><script src="/dev-blog/webpack-runtime-31580d5d2e6c8dbfc170.js" async=""></script></body></html>