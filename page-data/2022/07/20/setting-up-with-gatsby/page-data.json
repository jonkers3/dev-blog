{"componentChunkName":"component---src-pages-blog-mdx-slug-js","path":"/2022/07/20/setting-up-with-gatsby/","result":{"data":{"mdx":{"frontmatter":{"title":"Setting Up a Dev Blog With Gatsby in 2022","date":"July 20, 2022"},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Setting Up a Dev Blog With Gatsby in 2022\",\n  \"date\": \"2022-07-20T00:00:00.000Z\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", null, \"Setting Up a Dev Blog with Gatsby in 2022\"), mdx(\"p\", null, \"Today we will set up our new dev blog. We will build it with Gatsby. The initial goals are simple blog functionality, markdown files to store our content, and a few other things one would probably like given the need to work with a lot of code - like syntax highlighting. A copy to clipboard button would also be nice on the user side. Our aims are primarily experimental and educational. Seeing as we already have some idea what we want, let's make it happen.\"), mdx(\"h3\", null, \"The Gatsby CLI\"), mdx(\"p\", null, \"Use the CLI to bootstrap the project. We don't even need to install it as we can run it with NPX. While it is possible to install Gatsby and configure all of these plugins manually, I didn't really learn anything particularly useful by doing that, other than that the CLI installs some dependencies that aren't entirely obvious, so just use the CLI.\"), mdx(\"p\", null, \"Following along with this should produce more or less the same exactly what you're looking at, given the same mdx source file.\"), mdx(\"br\", null), mdx(\"h2\", null, \"1. Create a new Gatsby Project\"), mdx(\"hr\", null), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"$ npx gatsby new\\n\\nWhat would you like to call your site?\\n\\u2714 My Blog\\n\")), mdx(\"p\", null, \"Run the CLI either with the global package or with NPX. The CLI prompts us to make some choices as far as options and plugins, typescript or not, things of that sort. We elected for MDX support, responsive images, and React Helmet. This generated the following gatsby-config.ts file for us:\"), mdx(\"h4\", null, mdx(\"em\", {\n    parentName: \"h4\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"em\"\n  }, \"gatsby-config.ts\"))), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, \"import type { GatsbyConfig } from 'gatsby'\\n\\nconst config: GatsbyConfig = {\\n  siteMetadata: {\\n    title: `My New Dev Blog`,\\n    siteUrl: `...`\\n  },\\n\\n  graphqlTypegen: true, // typescript only\\n\\n  plugins: [\\n    'gatsby-plugin-image',\\n    'gatsby-plugin-react-helmet',\\n    'gatsby-plugin-mdx',\\n    'gatsby-plugin-sharp',\\n    'gatsby-transformer-sharp',\\n\\n    {\\n      resolve: 'gatsby-source-filesystem',\\n      options: {\\n        name: 'images',\\n        path: './src/images/'\\n      },\\n      __key: 'images'\\n    },\\n\\n    {\\n      resolve: 'gatsby-source-filesystem',\\n      options: {\\n        name: 'pages',\\n        path: './src/pages/'\\n      },\\n      __key: 'pages'\\n    },\\n  ]\\n}\\n\\nexport default config\\n\")), mdx(\"br\", null), mdx(\"h2\", null, \"2. Configure a folder with some blog posts\"), mdx(\"hr\", null), mdx(\"p\", null, \"We made a folder called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"blog\"), \" in the project root. This is where we will keep the md/mdx files that comprise our collection of blog posts. We need to tell Gatsby about the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"blog\"), \" folder by adding one more item at the bottom of the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"plugins\"), \" array in our gatsby-config, just below the one mentioning \\\"pages\\\":\"), mdx(\"h4\", null, mdx(\"em\", {\n    parentName: \"h4\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"em\"\n  }, \"gatsby-config.ts\"))), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, \"  plugins: [\\n    ...\\n\\n    {\\n      resolve: 'gatsby-source-filesystem',\\n      options: {\\n        name: 'blog',\\n        path: './blog/'\\n      },\\n      __key: 'blog'\\n    }\\n  ]\\n\")), mdx(\"p\", null, \"Now the MDX plugin will see whatever markdown files exist in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"blog\"), \" folder. In effect, the folder is now among the sources that will be returned when running the allMdx query in our GraphQL.\"), mdx(\"p\", null, \"As far as the posts themselves, as in the mdx files, we probably want them organized by date. For example, this post is located at \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"blog/2022/07/20/setting-up-with-gatsby/index.mdx\"), \". Notice that the subfolder determines the URL slug. Rest assured we will be revisiting the question of what the optimal way to do this is, as it probably has SEO implications.\"), mdx(\"p\", null, \"In any case, the general idea is that we want some mdx files in our \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"blog\"), \" folder, and we want them to have at least title and date for frontmatter data. At a minimum:\"), mdx(\"h4\", null, mdx(\"em\", {\n    parentName: \"h4\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"em\"\n  }, \"blog/2022/07/20/setting-up-gatsby/index.mdx\"))), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-markdown\"\n  }, \"---\\ntitle: Setting Up Gatsby\\ndate: 2022-07-20\\n---\\n# The One\\n\\nThe Many\\n\")), mdx(\"br\", null), mdx(\"h2\", null, \"2b. Start the Development Server\"), mdx(\"p\", null, \"Having some files in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"blog\"), \" folder, we can now get the development server going...\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sh\"\n  }, \"npm start\\n\")), mdx(\"p\", null, \"At \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://localhost:8000\"\n  }, \"localhost:8000\"), \", you are congratulated on your new Gatsby site.\"), mdx(\"p\", null, \"At \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://localhost:8000/___graphql\"\n  }, \"localhost:8000/___graphql\"), \", you get the GraphQL query interface.\"), mdx(\"p\", null, \"The general idea is that we configure Gatsby to ingest various data sources - a headless CMS, a remote API, local files - and then to use it to generate web pages.  In our case it is quite simple, as all of our data is sourced from our \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"blog\"), \" folder and the mdx file(s) in it.\"), mdx(\"p\", null, \"The point is that Gatsby configuration revolves around making data available to and convenient to use in React components. This is the essential function of Gatsby.\"), mdx(\"p\", null, \"The following query is what we run to get the data needed to generate our blog's index page, for example. There are all kinds of useful attributes we could request in the same query: the word count for each post, for example.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-graphql\"\n  }, \"query MyQuery {\\n  allMdx {\\n    edges {\\n      node {\\n        id\\n        frontmatter {\\n          date\\n          title\\n        }\\n        wordCount\\n        slug\\n      }\\n    }\\n  }\\n}\\n\")), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"900px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/8a1eface6ddae3531d6e28ab3eecdea9/ccf0c/all-mdx-graphql.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"44.44444444444444%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABEklEQVQoz3XOWWrEMAyA4Zwi40W2JMvykmQySx8Knd7/XCVkOrQlhR9jhD+sQVlabdYDpnQ5r1PtLDllTVlFlSWT5Kx1v7Bsk62sUtqw3j4h8GhsrpWliM7Gwcm6vdE456GUSfs5IgUkQNxPiDjUct9fl9ZDRCpnQDlZZ5zfcxACos636/x21+Ve1lXnxBKRhjLfA8tobOlTROK6Rqkna3/hiDpdL7dHk15S0aRIHJCG3Ja2vBsLpXdKcvo2P3EkoqysHZA94r75hinppT+sBc4KEc0RVtFECeLTvBq0r6TTaIwP6CAcYiRG5D9yw21547KMxvqA1sNo7NHaB/L5c7t+GOd9iKIllwoRfYivIOJ/+AscvENLCGbFsQAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"all mdx graphql\",\n    \"title\": \"all mdx graphql\",\n    \"src\": \"/static/8a1eface6ddae3531d6e28ab3eecdea9/1cfc2/all-mdx-graphql.png\",\n    \"srcSet\": [\"/static/8a1eface6ddae3531d6e28ab3eecdea9/3684f/all-mdx-graphql.png 225w\", \"/static/8a1eface6ddae3531d6e28ab3eecdea9/fc2a6/all-mdx-graphql.png 450w\", \"/static/8a1eface6ddae3531d6e28ab3eecdea9/1cfc2/all-mdx-graphql.png 900w\", \"/static/8a1eface6ddae3531d6e28ab3eecdea9/21482/all-mdx-graphql.png 1350w\", \"/static/8a1eface6ddae3531d6e28ab3eecdea9/ccf0c/all-mdx-graphql.png 1428w\"],\n    \"sizes\": \"(max-width: 900px) 100vw, 900px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"br\", null), mdx(\"h2\", null, \"3. Add an Index Page for our Blog Posts\"), mdx(\"hr\", null), mdx(\"p\", null, \"So far so good. We want now to make \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://localhost:8000/blog\"\n  }, \"localhost:8000/blog\"), \" serve as the index page for our blog. Basically just a list of all our blog posts. To get that working, ceate a folder called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"blog\"), \" inside of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"src/pages\"), \", and then create the following file inside of it:\"), mdx(\"h4\", null, mdx(\"em\", {\n    parentName: \"h4\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"em\"\n  }, \"src/pages/blog/index.js\"))), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"import * as React from 'react'\\nimport { graphql, Link } from 'gatsby'\\n\\nconst Blog = ({ data }) => {\\n  return (\\n    <>\\n      {data.allMdx.nodes.map((node) => (\\n        <article key={node.id}>\\n          <h2>\\n            <Link to={`/blog/${node.slug}`}>\\n              {node.frontmatter.title}\\n            </Link>\\n          </h2>\\n          <p>{node.frontmatter.date}</p>\\n          <p>{node.slug}</p>\\n        </article>\\n      ))}\\n    </>\\n  )\\n}\\n\\nexport const query = graphql`\\n  query {\\n    allMdx(sort: { fields: frontmatter___date, order: DESC }) {\\n      nodes {\\n        frontmatter {\\n          date(formatString: \\\"MMMM D, YYYY\\\")\\n          title\\n        }\\n        slug\\n        id\\n      }\\n    }\\n  }\\n`\\n\\nexport default Blog\\n\")), mdx(\"br\", null), mdx(\"h2\", null, \"4. Create a Template for Blog Posts\"), mdx(\"hr\", null), mdx(\"p\", null, \"Now that we have the index page, its links need to be wired up to individual blog post pages. Create the following file to serve as the template for such pages:\"), mdx(\"h4\", null, mdx(\"em\", {\n    parentName: \"h4\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"em\"\n  }, \"src/pages/blog/{mdx.slug}.js\"))), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"import * as React from 'react'\\nimport { graphql } from 'gatsby'\\nimport { MDXRenderer } from 'gatsby-plugin-mdx'\\n\\nconst BlogPost = ({ data }) => {\\n  return (\\n    <>\\n      <p>{data.mdx.frontmatter.date}</p>\\n      <MDXRenderer>{data.mdx.body}</MDXRenderer>\\n    </>\\n  )\\n}\\n\\nexport const query = graphql`\\n  query ($id: String) {\\n    mdx(id: { eq: $id }) {\\n      frontmatter {\\n        title\\n        date(formatString: \\\"MMMM D, YYYY\\\")\\n      }\\n      body\\n    }\\n  }\\n`\\n\\nexport default BlogPost\\n\")), mdx(\"p\", null, \"Now, we can visit the index at \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://localhost:8000/blog\"\n  }, \"localhost:8000/blog\"), \", click on a link, and see the full content of the post.\"), mdx(\"br\", null), mdx(\"h2\", null, \"5. Configure MDX to work with Inline Images\"), mdx(\"hr\", null), mdx(\"p\", null, \"One thing we know that we want is to be ability to use inline images, storing image files directly alongside the markdown file that refers to them. This is perfect for pictures that belong to a single blog post, like the images on the page. As this post is the only place these pictures are needed, it makes sense that they are colocated with the text that references them.\"), mdx(\"p\", null, \"At this point, upon navigating to our blog post, we will probably find that things don't look as good in our web browser as they do in the preview pane of our Markdown editor. We can fix things up by changing how the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-plugin-mdx\"), \" plugin is configured.\"), mdx(\"p\", null, \"Back again in our gatsby-config file, we will replace the existing reference to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"'gatsby-plugin-mdx'\"), \" with a new object definition, like this:\"), mdx(\"h4\", null, mdx(\"em\", {\n    parentName: \"h4\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"em\"\n  }, \"gatsby-config.ts\"))), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"- 'gatsby-plugin-mdx',\\n\\n+ {\\n+   resolve: `gatsby-plugin-mdx`,\\n+   options: {\\n+     gatsbyRemarkPlugins: [\\n+       {\\n+         resolve: `gatsby-remark-images`,\\n+         options: {\\n+           maxWidth: 900\\n+         }\\n+       }\\n+     ]\\n+   }\\n+ },\\n\")), mdx(\"p\", null, \"Now upon restarting the development server we get the desired behavior as far as inline images are concerned. As a bonus, we also get the neat progressive loading effect and the   thumbnail links.\"), mdx(\"br\", null), mdx(\"h2\", null, \"6. Color Syntax Highlighting with Prism.js\"), mdx(\"hr\", null), mdx(\"p\", null, \"Our use case involves the frequent usage of code blocks, so we might as well make them as easy to digest and as visually pleasing as possible. Syntax highlighting can be had with minimal effort by doing the following three things.\"), mdx(\"h3\", null, \"Install prism-react-renderer, mdx-utils\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sh\"\n  }, \"npm i prism-react-renderer mdx-utils\\n\")), mdx(\"h3\", null, \"Add a component to render code blocks\"), mdx(\"h4\", null, mdx(\"em\", {\n    parentName: \"h4\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"em\"\n  }, \"src/components/Code.jsx\"))), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\"\n  }, \"import React from 'react'\\nimport Highlight, { defaultProps } from 'prism-react-renderer'\\nimport theme from 'prism-react-renderer/themes/github'\\n\\nconst Code = ({ codeString, language, ...props }) => {\\n  const [isCopied, setIsCopied] = React.useState(false)\\n\\n  return (\\n    <Highlight\\n      {...defaultProps}\\n      code={codeString}\\n      language={language}\\n      theme={theme}\\n    >\\n      {({ className, style, tokens, getLineProps, getTokenProps }) => (\\n        <pre\\n          className={className}\\n          style={{ ...style, padding: '20px', position: 'relative' }}\\n        >\\n          {tokens.map((line, i) => (\\n            <div key={i} {...getLineProps({ line, key: i })}>\\n              {line.map((token, key) => (\\n                <span key={key} {...getTokenProps({ token, key })} />\\n              ))}\\n            </div>\\n          ))}\\n        </pre>\\n      )}\\n    </Highlight>\\n  )\\n}\\n\\nexport default Code\\n\")), mdx(\"h3\", null, \"Update layout to make use of MDXProvider and mdx-utils\"), mdx(\"h4\", null, mdx(\"em\", {\n    parentName: \"h4\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"em\"\n  }, \"src/pages/blog/{mdx.slug}.js\"))), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\"\n  }, \"import * as React from 'react'\\nimport { graphql } from 'gatsby'\\nimport { MDXRenderer } from 'gatsby-plugin-mdx'\\nimport { MDXProvider } from '@mdx-js/react'\\nimport { preToCodeBlock } from 'mdx-utils'\\nimport Code from '../../components/Code'\\nimport Layout from '../../components/Layout'\\n\\nconst components = {\\n  pre: (preProps) => {\\n    const props = preToCodeBlock(preProps)\\n\\n    if (props) {\\n      return <Code {...props} />\\n    } else {\\n      return <pre {...preProps} />\\n    }\\n  }\\n}\\n\\nconst BlogPost = ({ data }) => {\\n  return (\\n    <Layout>\\n      <MDXProvider components={components}>\\n        <p>{data.mdx.frontmatter.date}</p>\\n        <MDXRenderer>{data.mdx.body}</MDXRenderer>\\n      </MDXProvider>\\n    </Layout>\\n  )\\n}\\n\\nexport const query = graphql`\\n  query ($id: String) {\\n    mdx(id: { eq: $id }) {\\n      frontmatter {\\n        title\\n        date(formatString: \\\"MMMM D, YYYY\\\")\\n      }\\n      body\\n    }\\n  }\\n`\\n\\nexport default BlogPost\\n\")), mdx(\"p\", null, \"That's basically it. Syntax highlighting now works for more or less any language. As good as it looks, it could actually still be quite a lot better. Since presenting code is a fundamental part of a dev blog, we're going to want to explore our possibilities. Line numbers, for example, are something we will want to add. Something to indicate the language of the code block as specified to prism.js is something we will want to add.\"), mdx(\"p\", null, \"Given the endless possibilities we will have to have a post entirely dedicated to prism.js and advanced options for it. For now, we'll just be happy with our code is nicely highlighted.\"), mdx(\"br\", null), mdx(\"h2\", null, \"7. Common Layout Component\"), mdx(\"hr\", null), mdx(\"p\", null, \"The main thing we are in need of is some kind of navigation controls - a nav bar, perhaps - and some kind of layout scheme. Header, footer, that sort of thing. At the moment though, the only thing thats urgent is getting our content nicely centered. Let's create a shared Layout component where all of these things can eventually be addressed.\"), mdx(\"p\", null, \"I have some thinking to do about what I want as far as the UI is concerned. Most of my thinking has been expressive of a desire for minimalism. Setting up a big dependency on a UI framework doesn't sound appealing at the moment. For the time being I'm just going to be using styled-components, which we install like so:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sh\"\n  }, \"npm install gatsby-plugin-styled-components styled-components babel-plugin-styled-components\\n\")), mdx(\"p\", null, \"Configure Gatsby to use the plugin:\"), mdx(\"h4\", null, mdx(\"em\", {\n    parentName: \"h4\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"em\"\n  }, \"gatsby-config.ts\"))), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, \"plugins: [\\n  ...\\n\\n+ 'gatsby-plugin-styled-components',\\n\\n  ...\\n]\\n\")), mdx(\"p\", null, \"Let's now create a common Layout file. We'll include a rudimentary header component with a link to our index page. Then we just need to change the index and the blog template so that they are wrapped with this new Layout component.\"), mdx(\"h4\", null, mdx(\"em\", {\n    parentName: \"h4\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"em\"\n  }, \"src/components/Layout.jsx\"))), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\"\n  }, \"import { Link } from 'gatsby'\\nimport React from 'react'\\nimport styled from 'styled-components'\\n\\nexport const PageContainer = styled.div`\\n  max-width: 860px;\\n  margin: 0 auto;\\n  padding: 0 0px;\\n  box-sizing: border-box;\\n`\\nexport const InnerContainer = styled.div`\\n  padding: 12px;\\n`\\n\\nconst Header = styled.div``\\n\\nconst Layout = ({ children }) => (\\n  <PageContainer>\\n    <Header>\\n      <Link to='/blog'>Home</Link>\\n    </Header>\\n    <InnerContainer>{children}</InnerContainer>\\n  </PageContainer>\\n)\\n\\nexport default Layout\\n\")), mdx(\"h4\", null, mdx(\"em\", {\n    parentName: \"h4\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"em\"\n  }, \"src/pages/blog/{mdx.slug}.js\"))), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\"\n  }, \"import Layout from '../../components/Layout'\\n\\nconst BlogPost = ({ data }) => {\\n  return (\\n-   <>\\n+   <Layout>\\n      <p>{data.mdx.frontmatter.date}</p>\\n      <MDXRenderer>{data.mdx.body}</MDXRenderer>\\n+   </Layout>\\n-   </>\\n  )\\n}\\n\")), mdx(\"h4\", null, mdx(\"em\", {\n    parentName: \"h4\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"em\"\n  }, \"src/pages/blog/index.js\"))), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\"\n  }, \"import Layout from '../../components/Layout'\\n\\nconst Blog = ({ data }) => {\\n  return (\\n-   <>\\n+   <Layout>\\n      {data.allMdx.nodes.map((node) => (\\n        <article key={node.id}>\\n        ....\\n      ))}\\n+   </Layout>\\n-   </>\\n  )\\n}\\n\")), mdx(\"p\", null, \"Notice what happens when we try to copy and paste one of those code blocks? That's exactly the type of thing we will try to improve when we revisit our \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"prism.js\"), \" setup, sometime in the near future.\"), mdx(\"br\", null), mdx(\"h2\", null, \"8. Copy to Clipboard Button\"), mdx(\"hr\", null), mdx(\"p\", null, \"If you've made it to this point, you should have a pretty spiffy looking setup coming together. As far as our initial list of desired features, the only thing we have yet to do is the Copy-to-Clipboard button. This is the last task of our initial setup. We need to change only one file to get this working. Add the following code to it:\"), mdx(\"h4\", null, mdx(\"em\", {\n    parentName: \"h4\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"em\"\n  }, \"src/components/Code.jsx\"))), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\"\n  }, \"import React from 'react'\\nimport Highlight, { defaultProps } from 'prism-react-renderer'\\nimport theme from 'prism-react-renderer/themes/github'\\n\\n+ const CopyButton = (props) => {\\n+   return (\\n+     <button\\n+       style={{\\n+         position: 'absolute',\\n+         top: 0,\\n+         right: 0,\\n+         margin: '8px',\\n+         padding: '8px 12px 8px 12px',\\n+         borderRadius: '8px',\\n+         borderWidth: 0,\\n+         background: 'deepskyblue'\\n+       }}\\n+       {...props}\\n+     />\\n+   )\\n+ }\\n\\n+ const copyToClipboard = (str) => {\\n+   const el = document.createElement('textarea')\\n+   el.value = str\\n+   el.setAttribute('readonly', '')\\n+   el.style.position = 'absolute'\\n+   el.style.left = '-9999px'\\n+   document.body.appendChild(el)\\n+   el.select()\\n+   document.execCommand('copy')\\n+   document.body.removeChild(el)\\n+ }\\n\\nconst Code = ({ codeString, language, ...props }) => {\\n  const [isCopied, setIsCopied] = React.useState(false)\\n\\n  return (\\n    <Highlight\\n      {...defaultProps}\\n      code={codeString}\\n      language={language}\\n      theme={theme}\\n    >\\n      {({ className, style, tokens, getLineProps, getTokenProps }) => (\\n        <pre\\n          className={className}\\n          style={{ ...style, padding: '20px', position: 'relative' }}\\n        >\\n+         <CopyButton\\n+           onClick={() => {\\n+             copyToClipboard(codeString)\\n+             setIsCopied(true)\\n+             setTimeout(() => setIsCopied(false), 3000)\\n+           }}\\n+         >\\n+           {isCopied ? <i>Copied!</i> : 'Copy'}\\n+         </CopyButton>\\n\\n          {tokens.map((line, i) => (\\n            <div key={i} {...getLineProps({ line, key: i })}>\\n              {line.map((token, key) => (\\n                <span key={key} {...getTokenProps({ token, key })} />\\n              ))}\\n            </div>\\n          ))}\\n        </pre>\\n      )}\\n    </Highlight>\\n  )\\n}\\n\\nexport default Code\\n\")), mdx(\"p\", null, \"I mostly just like the way it looks. This type of code block is actually the perfect example of when such a buttons feels less helpful than it seems like it should be. In any case, we now have our button.\"), mdx(\"br\", null), mdx(\"h2\", null, \"9. Wrapup\"), mdx(\"hr\", null), mdx(\"p\", null, \"Here now we have our basic blog structure in place.\"), mdx(\"p\", null, \"We can take markdown and mdx files, and adjacent image files, and we can drop them into our blog folder, where they will more or less be automatically processed into blazing fast pre-built static pages ready to serve.\"), mdx(\"p\", null, \"Markdown and React go \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"good\"), \" together. Gatsby's data layer is a perfect use case for GraphQL. These things seem to be meant for each other. It isn't hard to see why this is such a popular way to build modern websites.\"), mdx(\"p\", null, \"In \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/part-ii\"\n  }, \"Part II\"), \" we will deploy our new blog somewhere after applying a few finishing touches to our setup.\"));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"slug":"2022/07/20/setting-up-with-gatsby/","prev":{"frontmatter":{"date":"22 July 2022","title":"Setting Up a Dev Blog With Gatsby in 2022, Part II"},"slug":"2022/07/22/setting-up-with-gatsby-part-ii/"}}},"staticQueryHashes":[]}