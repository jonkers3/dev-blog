{"componentChunkName":"component---src-templates-post-jsx","path":"/2022/07/20/setting-up-with-gatsby/","result":{"pageContext":{"node":{"frontmatter":{"title":"Setting Up a new Dev Blog With Gatsby in 2022","date":"July 20, 2022","tags":["Gatsby","Guides","React"]},"slug":"2022/07/20/setting-up-with-gatsby/","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Setting Up a new Dev Blog With Gatsby in 2022\",\n  \"date\": \"2022-07-20T00:00:00.000Z\",\n  \"tags\": [\"Gatsby\", \"Guides\", \"React\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Today we will set up a new dev blog. We will build it with Gatsby.\"), mdx(\"p\", null, \"The initial goals are just the basic functionality of an index page with links to individual posts, and some niceties for presenting a lot of code, like syntax highlighting and a copy-to-clipboard button. We will be storing our content in markdown files.\"), mdx(\"br\", null), mdx(\"h2\", null, \"1. Bootstrapping a new Gatsby Project\"), mdx(\"hr\", null), mdx(\"p\", null, \"We could install \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatbsy-cli\"), \" globally or we can run it with NPX, but either way, \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"use the CLI to bootstrap the project\"), \":\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sh\",\n    \"metastring\": \"image=init.png\",\n    \"image\": \"init.png\"\n  }, \"npx gatsby new\\n\")), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"960px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/dev-blog/static/673b9e2c8140023b87be92772fecf6f6/8a69d/init.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"50.83333333333333%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABMElEQVQoz41Sa4+CMBCEFqFF5dEWCoelLVCecnIav9z//2EX1FzuEk2c3Y87O7OTtXZBlMqK8pwQQhNGWEpZ4mw2lmXZf2A9BeWH7votTpcPqUtdlbpWVVMImfCcUEYoZSlPePacjYNYnq+8nwshpdIsSWOaHErl+1vbtgGE936u7AYhH2emm6zpMtM5GEMAIHReWv1Hjmg+ndK2J91YfC5cKaW0UDqKiet6HkIIYwDAc7Ifxua4SNOrttfdIJtW10bWRqgqL4QotZDVbh94CHkIuR5C2Hcc50HeB9FxuYzzMs1f/XjkWZ4fRBRF/xRsG6wFHsn/XuRvd+Pp3AyjGaZ+milla043n7e5W70CRrhth7oflelUbWRVhzF5K611/T50CgksC0C4SkJ4/5B38APFFxwGw8kX5gAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"init\",\n    \"title\": \"init\",\n    \"src\": \"/dev-blog/static/673b9e2c8140023b87be92772fecf6f6/d9199/init.png\",\n    \"srcSet\": [\"/dev-blog/static/673b9e2c8140023b87be92772fecf6f6/8ff5a/init.png 240w\", \"/dev-blog/static/673b9e2c8140023b87be92772fecf6f6/e85cb/init.png 480w\", \"/dev-blog/static/673b9e2c8140023b87be92772fecf6f6/d9199/init.png 960w\", \"/dev-blog/static/673b9e2c8140023b87be92772fecf6f6/8a69d/init.png 1209w\"],\n    \"sizes\": \"(max-width: 960px) 100vw, 960px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"Run the CLI and follow the prompts to choose your styling library, plugins, typescript or not, that sort of thing. This time we selected MDX support, responsive images, and React Helmet. For styling, we're going to use plain CSS modules.\"), mdx(\"p\", null, \"The CLI will generate some files, and the first one to know about it is \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-config.js/ts\"), \":\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-ts\",\n    \"metastring\": \"file=gatsby-config.ts\",\n    \"file\": \"gatsby-config.ts\"\n  }, \"import type { GatsbyConfig } from 'gatsby'\\n\\nconst config: GatsbyConfig = {\\n  siteMetadata: {\\n    title: `My New Dev Blog`,\\n    siteUrl: `http://my.blog.local`\\n  },\\n\\n  graphqlTypegen: true,\\n\\n  plugins: [\\n    'gatsby-plugin-image',\\n    'gatsby-plugin-react-helmet',\\n    'gatsby-plugin-mdx',\\n    'gatsby-plugin-sharp',\\n    'gatsby-transformer-sharp',\\n\\n    {\\n      resolve: 'gatsby-source-filesystem',\\n      options: {\\n        name: 'images',\\n        path: './src/images/'\\n      },\\n      __key: 'images'\\n    },\\n\\n    {\\n      resolve: 'gatsby-source-filesystem',\\n      options: {\\n        name: 'pages',\\n        path: './src/pages/'\\n      },\\n      __key: 'pages'\\n    },\\n  ]\\n}\\n\\nexport default config\\n\")), mdx(\"p\", null, \"First, a few things for our initial setup:\"), mdx(\"h3\", null, \"Using ES6 syntax in \", mdx(\"inlineCode\", {\n    parentName: \"h3\"\n  }, \"gatsby-node.js\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sh\",\n    \"metastring\": \"image=init.png\",\n    \"image\": \"init.png\"\n  }, \"npm i esm\\n\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\",\n    \"metastring\": \"file=gatsby-node.js\",\n    \"file\": \"gatsby-node.js\"\n  }, \"require = require('esm')(module)\\nmodule.exports = require('./gatsby-node.esm.js')\\n\")), mdx(\"h3\", null, \"Add aliases for absolute imports:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\",\n    \"metastring\": \"file=gatsby-node.esm.js\",\n    \"file\": \"gatsby-node.esm.js\"\n  }, \"const path = require('path')\\n\\nexport onCreateWebpackConfig = ({ actions }) => {\\n  actions.setWebpackConfig({\\n    resolve: {\\n      alias: {\\n        '@components': path.resolve(__dirname, 'src', 'components')\\n      }\\n    }\\n  })\\n}\\n\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\",\n    \"metastring\": \"file=ts-config.json add=3-5 exclude=1,2,6\",\n    \"file\": \"ts-config.json\",\n    \"add\": \"3-5\",\n    \"exclude\": \"1,2,6\"\n  }, \"{\\n  \\\"compilerOptions\\\": {\\n    \\\"paths\\\": {\\n      \\\"@components/*\\\": [\\\"./src/components/*\\\"]\\n    },\\n    ...\\n\")), mdx(\"p\", null, \"If your setup is like mine and you're using Typescript + CSS modules, you'll probably also want a definitions file along these lines to prevent the compiler from finding fault with our CSS module imports:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-ts\",\n    \"metastring\": \"file=src/global.d.ts.ts\",\n    \"file\": \"src/global.d.ts.ts\"\n  }, \"declare module '*.css' {\\n  const content: { [className: string]: string }\\n  export = content\\n}\\n\")), mdx(\"br\", null), mdx(\"h2\", null, \"2. Configuring a data source\"), mdx(\"hr\", null), mdx(\"p\", null, \"Our posts (as in the mdx files) will be organized by date in subfolders. The mdx behind this post is at \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"./blog/2022/07/20/setting-up-with-gatsby/index.mdx\"), \" in the local filesystem, for example.\"), mdx(\"p\", null, \"Our file system will also determine the URL of our post, so the way we organize our files is extremely important. This folder structure is what we want:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-none\",\n    \"metastring\": \"copy=0\",\n    \"copy\": \"0\"\n  }, \"\\uD83D\\uDCE6blog\\n \\u2514 \\uD83D\\uDCC22022\\n \\u2502 \\u2514 \\uD83D\\uDCC207\\n \\u2502 \\u2502 \\u251C \\uD83D\\uDCC220\\n \\u2502 \\u2502 \\u2502 \\u2514 \\uD83D\\uDCC2setting-up-with-gatsby\\n \\u2502 \\u2502 \\u2502 \\u2502 \\u251C \\uD83D\\uDCDCindex.mdx\\n \\u2502 \\u2502 \\u2502 \\u2502 \\u2514 \\uD83D\\uDCDCmdx-graphql.png\\n \\u2502 \\u2502 \\u251C \\uD83D\\uDCC222\\n \\u2502 \\u2502 \\u2502 \\u2514 \\uD83D\\uDCC2setting-up-with-gatsby-ii\\n \\u2502 \\u2502 \\u2502 \\u2502 \\u251C \\uD83D\\uDCDCgithub-pages-settings.png\\n \\u2502 \\u2502 \\u2502 \\u2502 \\u2514 \\uD83D\\uDCDCindex.mdx\\n\")), mdx(\"p\", null, \"Make a folder called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"blog\"), \" in the project root. This is where we will keep the markdown files that comprise our collection of blog posts.\"), mdx(\"p\", null, \"We tell Gatsby about this \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"blog\"), \" folder by adding one more item at the bottom of the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"plugins\"), \" array in our \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-config\"), \", just below the other \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-source-filesystem\"), \" definitions.\"), mdx(\"p\", null, \"In effect, this makes the files in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"blog\"), \" folder visible to our GraphQL queries:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-ts\",\n    \"metastring\": \"file=gatsby-config.ts exclude=1-3,12 add=4-11\",\n    \"file\": \"gatsby-config.ts\",\n    \"exclude\": \"1-3,12\",\n    \"add\": \"4-11\"\n  }, \"plugins: [\\n  ...\\n\\n  {\\n    resolve: 'gatsby-source-filesystem',\\n    options: {\\n      name: 'blog',\\n      path: './blog/'\\n    },\\n    __key: 'blog'\\n  }\\n]\\n\")), mdx(\"br\", null), mdx(\"h2\", null, \"3. Create the blog index page\"), mdx(\"hr\", null), mdx(\"p\", null, \"Start the development server...\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sh\",\n    \"metastring\": \"command=1 output=3,4\",\n    \"command\": \"1\",\n    \"output\": \"3,4\"\n  }, \"npm start\\n\\n  > dev-blog@1.0.0 start\\n  > gatsby develop -o -p 8000\\n\")), mdx(\"p\", null, \"At \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://localhost:8000/___graphql\"\n  }, \"localhost:8000/___graphql\"), \", you get the GraphQL query interface. Basically this is just a nice UI to query Gatsby's data layer, meaning the things you have configured Gatsby to be able to get data from (like our \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"blog\"), \" folder). We use the UI to develop the queries we need to power our site.\"), mdx(\"p\", null, \"For example, this query is basically what we will run to get the data to generate the index page. Try running this query while the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"blog\"), \" folder is still empty:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-graphql\"\n  }, \"query BlogPosts {\\n  allMdx(\\n    sort: {order: DESC, fields: [frontmatter___date]},\\n    limit: 10\\n  ) {\\n    edges {\\n      node {\\n        slug\\n        frontmatter {\\n          date(formatString: \\\"DD MMMM YYYY\\\")\\n          title\\n        }\\n        wordCount {\\n          words\\n        }\\n      }\\n    }\\n  }\\n}\\n\")), mdx(\"p\", null, \"What happens is that GraphQL will throw an error: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Value \\\"frontmatter___date\\\" does not exist in \\\"MdxFieldsEnum\\\" enum\"), \", because our query basically says \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ORDER BY frontmatter___date\"), \", which doesn't exist in the GQL schema.\"), mdx(\"p\", null, \"If we had any files with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"frontmatter___date\"), \" set, it would have been added to the schema dynamically. If not, GraphQL has no way of knowing that it exists.\"), mdx(\"p\", null, \"However, if we really wanted our query to work in this situation and return an empty result set instead of an error, we could do something like this:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\",\n    \"metastring\": \"file=gatsby-node.esm.js\",\n    \"file\": \"gatsby-node.esm.js\"\n  }, \"export createSchemaCustomization = ({ actions }) => {\\n  const { createTypes } = actions\\n\\n  createTypes(`\\n    type Mdx implements Node {\\n      frontmatter: MdxFrontmatter\\n    }\\n    type MdxFrontmatter {\\n      date: Date @dateformat\\n    }\\n  `)\\n}\\n\")), mdx(\"p\", null, \"This isn't necessary because we don't plan on having an empty blog or inconsistent metadata in our MDX files. It is mentioned just to clarify how GraphQL queries are working with frontmatter in Gatsby.\"), mdx(\"p\", null, \"In any case, we need at least \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://raw.githubusercontent.com/jonkers3/dev-blog/master/blog/2022/07/20/setting-up-with-gatsby/index.mdx\"\n  }, \"one MDX file with a date\"), \" to exist in our blog folder before we can continue. Once we have that, our query should work:\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"960px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/dev-blog/static/c0a7b55dee8e85cd850d6a2089582b6a/c929c/mdx-gql.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"50%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABTUlEQVQoz3WRV27kQAxEdYqROjGTrTCSZoNtwPc/2EJjwGtsAN7vq2KBQy01orPqmDKrHecZvVuEuVu4uvdlVXM2E4/fWIj5cDzezNfblKZcK+Lsa5c1N6qNM2oBAeJlOcR7hlaRPmlIwzK/tHbVTrkAEWsn20qlUrA0yhUaIqr3/ccca3/2OruwAtIw+2m25wZjyiTSAHR+CK+tIFZMORfACi32n+f+tuvaJfyKCCYdbDlAYspXM4k2AIqtkt5SGnMZcymAQCS+cL9nxAIX9UqmQXyO4zU1uE2JRJH4Y8InFRBZrW/G5uzKpqxAz80F8NjeFdduIWq5tq/mh9wQ+/F67C93nUMiJIwdSYZGvN/fW+F6XczpP7KtZ2zfgQSQABmJAXkQm3X9dpumMeUK+M9mVQPi9nzPVwaNWZfHeP25/C1fiUghxiSN/pR/AQygTAfOOXCWAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"mdx gql\",\n    \"title\": \"mdx gql\",\n    \"src\": \"/dev-blog/static/c0a7b55dee8e85cd850d6a2089582b6a/d9199/mdx-gql.png\",\n    \"srcSet\": [\"/dev-blog/static/c0a7b55dee8e85cd850d6a2089582b6a/8ff5a/mdx-gql.png 240w\", \"/dev-blog/static/c0a7b55dee8e85cd850d6a2089582b6a/e85cb/mdx-gql.png 480w\", \"/dev-blog/static/c0a7b55dee8e85cd850d6a2089582b6a/d9199/mdx-gql.png 960w\", \"/dev-blog/static/c0a7b55dee8e85cd850d6a2089582b6a/c929c/mdx-gql.png 1218w\"],\n    \"sizes\": \"(max-width: 960px) 100vw, 960px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"br\", null), mdx(\"p\", null, \"Now, to create our index page, replace the contents of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"src/pages/index.jsx\"), \" file with the following:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\",\n    \"metastring\": \"file=src/pages/index.jsx start=1\",\n    \"file\": \"src/pages/index.jsx\",\n    \"start\": \"1\"\n  }, \"import * as React from 'react'\\nimport { graphql, Link } from 'gatsby'\\n\\nconst Blog = ({ data }) => {\\n  return (\\n    <>\\n      {data.allMdx.nodes.map((node) => (\\n        <article key={node.id}>\\n          <h2>\\n            <Link to={`/${node.slug}`}>\\n              {node.frontmatter.title}\\n            </Link>\\n          </h2>\\n          <p>{node.frontmatter.date}</p>\\n          <p>{node.slug}</p>\\n        </article>\\n      ))}\\n    </>\\n  )\\n}\\n\\nexport const query = graphql`\\n  query {\\n    allMdx(sort: { fields: frontmatter___date, order: DESC }) {\\n      nodes {\\n        frontmatter {\\n          date(formatString: \\\"MMMM D, YYYY\\\")\\n          title\\n        }\\n        slug\\n        id\\n      }\\n    }\\n  }\\n`\\n\\nexport default Blog\\n\")), mdx(\"p\", null, \"As you have probably noticed, there is some kind of extra something going on here. It's true. Gatsby works a bit of magic, taking the results of the exported \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"query\"), \" and then passing it into the component as a prop called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"data\"), \".\"), mdx(\"p\", null, \"It is a super-simple pattern where each page component has a query right alongside it, and the fact that GQL syntax resembles ES6 makes it even better, as the shape of the object we are deferencing in our component is made plainly evident just by glancing at the GQL query.\"), mdx(\"br\", null), mdx(\"h2\", null, \"4. Create a Template for Blog Posts\"), mdx(\"hr\", null), mdx(\"p\", null, \"Create a blog post template:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\",\n    \"metastring\": \"file=src/pages/{mdx.slug}.jsx\",\n    \"file\": \"src/pages/{mdx.slug}.jsx\"\n  }, \"import * as React from 'react'\\nimport { graphql } from 'gatsby'\\nimport { MDXRenderer } from 'gatsby-plugin-mdx'\\n\\nconst BlogPost = ({ data }) => {\\n  return (\\n    <>\\n      <p>{data.mdx.frontmatter.date}</p>\\n      <MDXRenderer>{data.mdx.body}</MDXRenderer>\\n    </>\\n  )\\n}\\n\\nexport const query = graphql`\\n  query ($id: String) {\\n    mdx(id: { eq: $id }) {\\n      frontmatter {\\n        title\\n        date(formatString: \\\"MMMM D, YYYY\\\")\\n      }\\n      body\\n    }\\n  }\\n`\\n\\nexport default BlogPost\\n\")), mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"{mdx.slug}\"), \" in the filename will be automatically expanded to the value returned by the query. For example: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"2022/07/20/setting-up-with-gatsby/\")), mdx(\"p\", null, \"Now, we should be able to click the links on the index page and be brought to a page with the full content of the post.\"), mdx(\"br\", null), mdx(\"h2\", null, \"5. Create a Layout\"), mdx(\"hr\", null), mdx(\"p\", null, \"The main thing we are in need of is some kind of navigation control. Eventually we need a header, footer, and that sort of thing. Getting our content nicely centered would also be nice.\"), mdx(\"p\", null, \"We will create a shared Layout component to address these things:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\",\n    \"metastring\": \"file=src/components/Layout/index.jsx\",\n    \"file\": \"src/components/Layout/index.jsx\"\n  }, \"import React from 'react'\\nimport * as styles from './layout.module.css'\\n\\nconst Layout = ({ children }) => (\\n  <div className={styles.pageContainer}>\\n      <nav>\\n        <ul className={styles.navLinks}>\\n          <li className>\\n            <Link to='/'>Home</Link>\\n          </li>\\n        </ul>\\n      </nav>\\n    <div className={styles.innerContainer}>{children}</div>\\n  </div>\\n)\\n\\nexport default Layout\\n\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-css\",\n    \"metastring\": \"file=src/components/Layout/layout.module.css\",\n    \"file\": \"src/components/Layout/layout.module.css\"\n  }, \".page-container {\\n  margin: 0 auto;\\n  padding: 0;\\n  box-sizing: border-box;\\n  max-width: 860px;\\n}\\n\\n.inner-container {\\n  margin-top: 7em;\\n  padding: 12px;\\n}\\n\\n.nav-links {\\n  column-count: 2;\\n  column-gap: 85%;\\n  display: flex;\\n  list-style: none;\\n  padding-left: 0;\\n}\\n\")), mdx(\"p\", null, \"Speaking of styles, let's also make a global CSS file for rules that need to apply everywhere:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-css\",\n    \"metastring\": \"file=src/styles/global.css\",\n    \"file\": \"src/styles/global.css\"\n  }, \"body {\\n  margin: 0px;\\n  line-height: 1.6;\\n  text-rendering: optimizeLegibility;\\n}\\n\")), mdx(\"p\", null, \"That needs to be referenced by a gatsby-browser file, so create one:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-css\",\n    \"metastring\": \"file=gatsby-browser.js\",\n    \"file\": \"gatsby-browser.js\"\n  }, \"import './src/styles/global.css'\\n\")), mdx(\"p\", null, \"We \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"could\"), \" wrap each of our pages with our new layout component, like this:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\",\n    \"metastring\": \"file=src/pages/{mdx.slug}.jsx add=1,6,9 remove=5,10 start=1\",\n    \"file\": \"src/pages/{mdx.slug}.jsx\",\n    \"add\": \"1,6,9\",\n    \"remove\": \"5,10\",\n    \"start\": \"1\"\n  }, \"import Layout from '@components/Layout'\\n\\nconst BlogPost = ({ data }) => {\\n  return (\\n    <>\\n    <Layout>\\n      <p>{data.mdx.frontmatter.date}</p>\\n      <MDXRenderer>{data.mdx.body}</MDXRenderer>\\n    </Layout>\\n    </>\\n  )\\n}\\n\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\",\n    \"metastring\": \"file=src/pages/index.jsx add=1,6,16 remove=5,17 start=1\",\n    \"file\": \"src/pages/index.jsx\",\n    \"add\": \"1,6,16\",\n    \"remove\": \"5,17\",\n    \"start\": \"1\"\n  }, \"  import Layout from '@components/Layout'\\n\\nconst Blog = ({ data }) => {\\n  return (\\n    <>\\n    <Layout>\\n      {data.allMdx.nodes.map((node) => (\\n        <article key={node.id}>\\n          <h2>\\n            <Link to={`/${node.slug}`}>{node.frontmatter.title}</Link>\\n          </h2>\\n          <p>Posted: {node.frontmatter.date}</p>\\n          <p>{node.slug}</p>\\n        </article>\\n      ))}\\n    </Layout>\\n    </>\\n  )\\n}\\n\")), mdx(\"p\", null, \"However, we want every page wrapped, so we can do this instead to acheive the same thing, and new pages we add will be wrapped by default:\"), mdx(\"p\", null, \"Add the following to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-browser.js\"), \" and export it from \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-ssr.js\"), \":\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\",\n    \"metastring\": \"file=gatsby-browser.js add=1-2,4-9\",\n    \"file\": \"gatsby-browser.js\",\n    \"add\": \"1-2,4-9\"\n  }, \"import * as React from 'react'\\nimport Layout from '@components/Layout'\\nimport './src/styles/global.css'\\n\\nconst wrapPageElement = ({ element, props }) => {\\n  return <Layout {...props}>{element}</Layout>\\n}\\n\\nexport { wrapPageElement }\\n\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\",\n    \"metastring\": \"file=gatsby-ssr.js\",\n    \"file\": \"gatsby-ssr.js\"\n  }, \"export { wrapPageElement } from './gatsby-browser.js'\\n\")), mdx(\"br\", null), mdx(\"h2\", null, \"6. Configure MDX to work with Inline Images\"), mdx(\"hr\", null), mdx(\"p\", null, \"Storing image files directly alongside the markdown files is obviously ideal in our case.\"), mdx(\"p\", null, \"We want to be able to reference images in our Markdown files like this:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-markdown\"\n  }, \"## MDX \\u2764\\uFE0F\\n\\n![Alt Text](hello.png)\\n\")), mdx(\"p\", null, \"We need to make a change to the configuration for the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-plugin-mdx\"), \" plugin due to the way our files are organized.\"), mdx(\"p\", null, \"Replace the existing reference to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"'gatsby-plugin-mdx'\"), \" with a new object definition, like this:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-ts\",\n    \"metastring\": \"file=gatsby-config.ts remove=1 exclude=2 add=3-12\",\n    \"file\": \"gatsby-config.ts\",\n    \"remove\": \"1\",\n    \"exclude\": \"2\",\n    \"add\": \"3-12\"\n  }, \"'gatsby-plugin-mdx',\\n\\n{\\n  resolve: `gatsby-plugin-mdx`,\\n  options: {\\n    gatsbyRemarkPlugins: [\\n      {\\n        resolve: `gatsby-remark-images`,\\n      }\\n    ]\\n  }\\n},\\n\")), mdx(\"p\", null, \"Upon restarting the development server, we can reference images as described and everything works.\"), mdx(\"p\", null, \"As a bonus, we also now get a neat progressive loading effect, as well as responsive thumbnails.\"), mdx(\"br\", null), mdx(\"h2\", null, \"7. Color Syntax Highlighting with Prism.js\"), mdx(\"hr\", null), mdx(\"p\", null, \"Our use case involves the frequent usage of code blocks, so we might as well make them as easy to digest and as visually pleasing as possible. Prism.js gives us syntax highlighting in almost any language with fairly minimal effort. To get the basic functionality we need only do three things:\"), mdx(\"h3\", null, \"Install prism-react-renderer\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sh\"\n  }, \"npm i prism-react-renderer\\n\")), mdx(\"h3\", null, \"Create a new component to render code blocks\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\",\n    \"metastring\": \"file=src/components/Code/index.jsx\",\n    \"file\": \"src/components/Code/index.jsx\"\n  }, \"import React from 'react'\\nimport Highlight, { defaultProps } from 'prism-react-renderer'\\nimport theme from 'prism-react-renderer/themes/github'\\n\\nconst Code = ({ codeString, language, ...props }) => {\\n  return (\\n    <Highlight\\n      {...defaultProps}\\n      code={codeString}\\n      language={language}\\n      theme={theme}\\n    >\\n      {({ className, style, tokens, getLineProps, getTokenProps }) => (\\n        <pre\\n          className={className}\\n          style={{ ...style, padding: '20px', position: 'relative' }}\\n        >\\n\\n          {tokens.map((line, i) => (\\n            <div key={i} {...getLineProps({ line, key: i })}>\\n              {line.map((token, key) => (\\n                <span key={key} {...getTokenProps({ token, key })} />\\n              ))}\\n            </div>\\n          ))}\\n        </pre>\\n      )}\\n    </Highlight>\\n  )\\n}\\n\\nexport default Code\\n\")), mdx(\"h3\", null, \"Wrap MDXRenderer with provider\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\",\n    \"metastring\": \"file=src/pages/{mdx.slug}.jsx\",\n    \"file\": \"src/pages/{mdx.slug}.jsx\"\n  }, \"import * as React from 'react'\\nimport { graphql } from 'gatsby'\\nimport { MDXRenderer } from 'gatsby-plugin-mdx'\\nimport { MDXProvider } from '@mdx-js/react'\\nimport { preToCodeBlock } from 'mdx-utils'\\nimport Code from '@components/Code'\\nimport Layout from '@components/Layout'\\n\\nconst BlogPost = ({ data }) => {\\n  return (\\n    <Layout>\\n      <MDXProvider components={components}>\\n        <p>{data.mdx.frontmatter.date}</p>\\n        <MDXRenderer>{data.mdx.body}</MDXRenderer>\\n      </MDXProvider>\\n    </Layout>\\n  )\\n}\\n\\nexport const query = graphql`\\n  query ($id: String) {\\n    mdx(id: { eq: $id }) {\\n      frontmatter {\\n        title\\n        date(formatString: \\\"MMMM D, YYYY\\\")\\n      }\\n      body\\n    }\\n  }\\n`\\n\\nconst components = {\\n  pre: preProps => {\\n    if (preProps.children?.props?.mdxType !== 'code') {\\n      return <pre {...preProps} />\\n    }\\n\\n    const {\\n      children: codeString,\\n      className = '',\\n      ...props\\n    } = preProps.children.props\\n\\n    const match = className.match(/language-([\\\\0-\\\\uFFFF]*)/)\\n\\n    return (\\n      <Code\\n        {...props}\\n        codeString={codeString.trim()}\\n        className={className}\\n        language={match != null ? match[1] : ''}\\n      />\\n    )\\n  }\\n}\\n\\nexport default BlogPost\\n\")), mdx(\"p\", null, \"That's basically it. This looks pretty nice once it is working, but since presenting code is a fundamental part of a dev blog, we're going to want to improve some things. Line numbers, for example, are something we will want to add.\"), mdx(\"p\", null, \"Given the endless possibilities we will have to have a post entirely dedicated to prism.js and advanced options for it. For now, we'll just be happy about how nice and colorful things already are.\"), mdx(\"br\", null), mdx(\"h2\", null, \"8. Copy to Clipboard Button\"), mdx(\"hr\", null), mdx(\"p\", null, \"If you've made it to this point, you should have a pretty spiffy looking setup coming together. As far as our initial list of desired features, the only thing we have yet to do is the Copy-to-Clipboard button. This is the last task of our initial setup. We need to change only one file to get this working. Add the following code to it:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\",\n    \"metastring\": \"file=src/components/Code/index.jsx add=4-7,24-32 start=1\",\n    \"file\": \"src/components/Code/index.jsx\",\n    \"add\": \"4-7,24-32\",\n    \"start\": \"1\"\n  }, \"import React from 'react'\\nimport Highlight, { defaultProps } from 'prism-react-renderer'\\nimport theme from 'prism-react-renderer/themes/github'\\nimport * as styles from './code.module.css'\\n\\nconst CopyButton = props =>\\n  <button className={styles.button} {...props} />\\n\\nconst Code = ({ codeString, language, ...props }) => {\\n  const [isCopied, setIsCopied] = React.useState(false)\\n\\n  return (\\n    <Highlight\\n      {...defaultProps}\\n      code={codeString}\\n      language={language}\\n      theme={theme}\\n    >\\n      {({ className, style, tokens, getLineProps, getTokenProps }) => (\\n        <pre\\n          className={className}\\n          style={{ ...style, padding: '20px', position: 'relative' }}\\n        >\\n          <CopyButton\\n            onClick={() => {\\n              navigator.clipboard.writeText(codeString)\\n              setIsCopied(true)\\n              setTimeout(() => setIsCopied(false), 4000)\\n            }}\\n          >\\n            {isCopied ? <i>Copied!</i> : 'Copy'}\\n          </CopyButton>\\n\\n          {tokens.map((line, i) => (\\n            <div key={i} {...getLineProps({ line, key: i })}>\\n              {line.map((token, key) => (\\n                <span key={key} {...getTokenProps({ token, key })} />\\n              ))}\\n            </div>\\n          ))}\\n        </pre>\\n      )}\\n    </Highlight>\\n  )\\n}\\n\\nexport default Code\\n\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-css\",\n    \"metastring\": \"file=src/components/Code/code.module.css\",\n    \"file\": \"src/components/Code/code.module.css\"\n  }, \".button {\\n  position: absolute;\\n  top: 0;\\n  right: 0;\\n  margin: 8px;\\n  padding: 8px 12px;\\n  border-radius: 8px;\\n  border-width: 0;\\n  background: deepskyblue;\\n}\\n\\n\")), mdx(\"br\", null), mdx(\"h2\", null, \"9. Wrapup\"), mdx(\"hr\", null), mdx(\"p\", null, \"We now drop markdown and image files into our blog folder and know that when our app gets built and deployed, our files will be processed into blazing fast pre-built static pages, looking good and ready to be served.\"), mdx(\"p\", null, \"Markdown and React go \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"good\"), \" together. Gatsby's data layer is a perfect use case for GraphQL. These things are really meant for each other, and it is not surprising that this stack is a popular way to build websites.\"), mdx(\"p\", null, \"For the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/dev-blog/2022/07/22/setting-up-with-gatsby-ii\"\n  }, \"second part of this post\"), \", we will concern ourselves with getting our new Gatsby blog deployed.\"));\n}\n;\nMDXContent.isMDXComponent = true;"},"prev":null,"next":{"frontmatter":{"title":"Deploying a Gatsby Dev Blog on Github Pages","date":"July 22, 2022","tags":["CI","Gatsby","Guides"]},"slug":"2022/07/22/setting-up-with-gatsby-ii/","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Deploying a Gatsby Dev Blog on Github Pages\",\n  \"date\": \"2022-07-22T00:00:00.000Z\",\n  \"tags\": [\"CI\", \"Gatsby\", \"Guides\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Today we will deploying the new Gatsby-based dev blog that we worked through setting up \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/dev-blog/2022/07/20/setting-up-with-gatsby/\"\n  }, \"here\"), \".\"), mdx(\"p\", null, \"Today, we will just deploy to Github Pages, mostly just because it is free and presumably fairly easy to set up.\"), mdx(\"p\", null, \"Our main goal at the moment is just to get something up that we can easily add content and deploy changes to.\"), mdx(\"br\", null), mdx(\"h2\", null, \"1. Setup Github Repo and SSH\"), mdx(\"hr\", null), mdx(\"p\", null, \"Create yourself a new, empty repository on \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/new\"\n  }, \"Github\"), \". Locally, the Gatsby CLI should already have initialized a git repository for us. If not, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"git init\"), \".\"), mdx(\"h3\", null, \"Create an SSH key (with your own email)\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sh\",\n    \"metastring\": \"command=1,3,5 noCopy=2-5\",\n    \"command\": \"1,3,5\",\n    \"noCopy\": \"2-5\"\n  }, \"ssh-keygen -t ed25519 -C 'your@own-email.com'\\n\\neval \\\"$(ssh-agent -s)\\\"\\n\\nssh-add ~/.ssh/id_ed25519\\n\")), mdx(\"p\", null, \"Copy the output of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cat ~/.ssh/id_ed25519.pub\"), \" to the clipboard, paste it \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/settings/ssh/new\"\n  }, \"here\"), \" and save it, then verify things are working by running:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sh\"\n  }, \"ssh -T git@github.com\\n\")), mdx(\"h3\", null, \"Add a remote and push our code to Github.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sh\",\n    \"metastring\": \"command=1,3\",\n    \"command\": \"1,3\"\n  }, \"git remote add origin git@github.com:your/own-repo.git\\n\\ngit push --set-upstream origin master\\n\")), mdx(\"p\", null, \"At this point we should have our code live on Github in our \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"master\"), \" branch.\"), mdx(\"p\", null, \"Now, we can just commit our changes and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"git push\"), \", and our code with go straight to the master branch on Github.\"), mdx(\"br\", null), mdx(\"h2\", null, \"2. Configure Github Pages\"), mdx(\"hr\", null), mdx(\"p\", null, \"On the settings page for your Github repository, make sure that branch is set to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gh-pages\"), \" and that selected folder is \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"root\"), \", like this:\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"960px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/dev-blog/static/0af42f574786412bdaa27fcd1f5af9df/bb3b7/github-pages-settings.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"38.75%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABPUlEQVQY0z2RWW7DMAxEfYBY1mItJLXLlhMnTgr0/ncr3LQB5mMI8gEccrCYmbAfoS8xdx9XJuxlMiM3l0lfuLm8zb/ewwNQ5RI+sPUbxD3k7ig7TA4z+OIwO8zom6MCvmJoYoaR26GuO8VFqJOfpJtTjPdrPfb165GOIz6e+fmKxzPcd+wF1oI9Yy+2RRVooLCEsmkXR24m6RTRHEgSKu8FkqTwp7N0EkES/nZJAg4+rVITk+69dl3upe2pXMG3XK8xdgoLULWQtKtCF8btyO04WcbtsGzHyM0nM6V1u3/fHt8+9/X2ldsOoRnI0xkKmIRzmGsmTuSELeYPn+q1314YmnZRu6BdMpgtnneyp8kWsnKN68iEGfrtCb4aTIaSMn6SjiuQmsSMEBefNzCkNPEZhQKukCucFLLfB/0ArCwwKqehz2AAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"github pages settings\",\n    \"title\": \"github pages settings\",\n    \"src\": \"/dev-blog/static/0af42f574786412bdaa27fcd1f5af9df/d9199/github-pages-settings.png\",\n    \"srcSet\": [\"/dev-blog/static/0af42f574786412bdaa27fcd1f5af9df/8ff5a/github-pages-settings.png 240w\", \"/dev-blog/static/0af42f574786412bdaa27fcd1f5af9df/e85cb/github-pages-settings.png 480w\", \"/dev-blog/static/0af42f574786412bdaa27fcd1f5af9df/d9199/github-pages-settings.png 960w\", \"/dev-blog/static/0af42f574786412bdaa27fcd1f5af9df/bb3b7/github-pages-settings.png 1211w\"],\n    \"sizes\": \"(max-width: 960px) 100vw, 960px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"Gatsby is not the default for Github Pages, but it can still work, and \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/marketplace/actions/github-pages-action\"\n  }, \"Github Pages Action\"), \" looks like just the sort of thing that might make this easy. The only thing we need to do to leverage it is create the following yml file, which is a slightly modified version of the Gatsby example provided in their docs:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-yml\",\n    \"metastring\": \"file=.github/workflows/gh-pages.yml start=1\",\n    \"file\": \".github/workflows/gh-pages.yml\",\n    \"start\": \"1\"\n  }, \"name: GitHub Pages\\n\\non:\\n  push:\\n    branches:\\n      - master\\n  pull_request:\\n\\njobs:\\n  deploy:\\n    runs-on: ubuntu-20.04\\n    permissions:\\n      contents: write\\n    concurrency:\\n      group: ${{ github.workflow }}-${{ github.ref }}\\n    steps:\\n      - uses: actions/checkout@v3\\n\\n      - name: Setup Node\\n        uses: actions/setup-node@v3\\n        with:\\n          node-version: '18'\\n\\n      - name: Cache dependencies\\n        uses: actions/cache@v2\\n        with:\\n          path: ~/.npm\\n          key: ${{ runner.os }}-node-${{ hashFiles('**/package-lock.json') }}\\n          restore-keys: |\\n            ${{ runner.os }}-node-\\n\\n      - run: npm ci\\n      - run: npm run build\\n\\n      - name: Deploy\\n        uses: peaceiris/actions-gh-pages@v3\\n        if: ${{ github.ref == 'refs/heads/master' }}\\n        with:\\n          github_token: ${{ secrets.GITHUB_TOKEN }}\\n          publish_dir: ./public\\n\")), mdx(\"p\", null, \"Once those things are setup correctly, that should be it. When the master branch is updated on Github (as in when you call \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"git push\"), \"), it will trigger the workflow, and the process will culminate in a new version of our site being deployed to Github Pages.\"), mdx(\"br\", null), mdx(\"h2\", null, \"3. Update gatsby-config with path prefix\"), mdx(\"hr\", null), mdx(\"p\", null, \"Due to the nature of our Github Pages setup which entails our site root located in a subfolder, we need to make the one more change to ensure that all of our images and links are working right in the pages Gatsby generates.\"), mdx(\"p\", null, \"The value for our pathPrefix is, of course, the name of the Github repository. We don't need the path prefix in our development environment, so we can control whether it is set but using environment variable:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\",\n    \"metastring\": \"file=package.json add=2 remove=4 exclude=1,5\",\n    \"file\": \"package.json\",\n    \"add\": \"2\",\n    \"remove\": \"4\",\n    \"exclude\": \"1,5\"\n  }, \"\\\"scripts\\\": {\\n  \\\"build\\\": \\\"PATH_PREFIX=/dev-blog gatsby build --prefix-paths\\\",\\n\\n  \\\"build\\\": \\\"gatsby build\\\",\\n},\\n\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\",\n    \"metastring\": \"file=gatsby-config.ts\",\n    \"file\": \"gatsby-config.ts\"\n  }, \"  pathPrefix: process.env.PATH_PREFIX,\\n\")), mdx(\"br\", null), mdx(\"h2\", null, \"4. Commit changes and push to Github\"), mdx(\"hr\", null), mdx(\"p\", null, \"It turns out to be as easy as that. Push the rest of your changes and things should be good to go.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sh\",\n    \"metastring\": \"command=1,2\",\n    \"command\": \"1,2\"\n  }, \"git add -A && git commit -m 'initial deploy'\\ngit push\\n\")), mdx(\"p\", null, \"At this point, the blog should be looking good on Github Pages. Have fun with your new Gatsby blog!\"));\n}\n;\nMDXContent.isMDXComponent = true;"}}},"staticQueryHashes":[]}